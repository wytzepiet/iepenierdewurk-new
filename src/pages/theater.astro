---
import Image from "astro/components/Image.astro";
import Layout from "../layouts/Layout.astro";
import Concrete from "../images/concrete.webp";

const images = await Astro.glob("/src/images/fivefal/*").then((files) => {
  return files.map((file) => file.default);
});
---

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.querySelectorAll(".theater-image").forEach((image) => {
    gsap.from(image, {
      opacity: 0,
      y: 20,
      scale: 0.98,
      ease: "power2.out",
      duration: 1,
      scrollTrigger: {
        trigger: image,
        start: "top 80%",
        end: "bottom 20%",
      },
    });
  });
</script>

<Layout title="theater">
  <div class="absolute w-full h-screen bg-light" data-speed="clamp(0.5)">
    <Image
      src={Concrete}
      alt=""
      class="absolute w-full h-screen object-cover mix-blend-difference"
    />
    <div class="absolute inset-0 bg-gradient-to-b from-dark/40 to-dark"></div>
  </div>
  <h1
    class="text-9xl p-8 font-bold mix-blend-plus-lighter"
    data-speed="clamp(0.5)"
  >
    Ruig<br />
    van de<br />
    Tichel
  </h1>
  <div class="grid grid-cols-3 gap-4 p-4">
    {
      images.map((image, i) => {
        const spans = [2, 1, 1, 1, 2, 1, 1, 1, 1, 3];
        let span = spans[i % spans.length];

        return (
          <div
            style={`--span: span ${span} / span ${span}`}
            class="theater-image md:col-[--span] md:row-[--span]"
          >
            <Image
              src={image}
              alt=""
              class="aspect-[3/2] h-full w-full object-cover rounded"
              width={500 * span}
              loading="lazy"
              decoding="async"
            />
          </div>
        );
      })
    }
  </div>
</Layout>
